(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{Al62:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n="https://scapi.liziyi0914.com",l={get:e=>fetch(n+e),post:(e,t,a)=>fetch(n+e,{method:"POST",mode:"cors",body:JSON.stringify({token:t,data:a})}),delete:(e,t)=>fetch(n+e,{method:"DELETE",mode:"cors",body:JSON.stringify({token:t})})}},PS3x:function(e,t,a){"use strict";a.r(t);a("lUTK");var n=a("BvKs"),l=(a("B9cy"),a("Ol7k")),r=a("q1tI"),s=a.n(r),o=a("3a4m"),i=a.n(o),c=a("Al62"),m=l["a"].Header,d=l["a"].Content,h=l["a"].Sider,u=l["a"].Footer;t["default"]=class extends s.a.Component{constructor(){super(),this.state={path:"index"}}render(){var e=this.props.match.params.token;c["a"].get("/token/"+e).then(e=>e.status).then(e=>{403==e&&i.a.push("/login")});var t=this.props.location.pathname.split("/"),a=t[t.length-1];return a=""==a?"index":a,s.a.createElement(l["a"],{style:{height:"100%"}},s.a.createElement(h,{breakpoint:"lg",collapsedWidth:"0"},s.a.createElement(n["a"],{mode:"inline",defaultSelectedKeys:a,style:{height:"100%",borderRight:0},onClick:e=>{t[t.length-1]="index"==e.key?"":e.key,i.a.push(t.join("/"))}},s.a.createElement(n["a"].Item,{key:"index"},"\u6982\u89c8"),s.a.createElement(n["a"].Item,{key:"profiles"},"Profiles"),s.a.createElement(n["a"].Item,{key:"cards"},"Cards"),s.a.createElement(n["a"].Item,{key:"tokens"},"\u4ee4\u724c"))),s.a.createElement(l["a"],null,s.a.createElement(m,null,"Header"),s.a.createElement(d,null,this.props.children),s.a.createElement(u,null,"Footer")))}}},Te3f:function(e,t,a){"use strict";a.r(t);a("5NDa");var n=a("5rEg"),l=(a("y8nQ"),a("Vl3Y")),r=(a("Mwp2"),a("VXEj")),s=(a("IzEo"),a("bx4M")),o=(a("g9YV"),a("wCAj")),i=(a("2qtc"),a("kLXV")),c=(a("+L6B"),a("2/Rp")),m=a("q1tI"),d=a.n(m),h=a("Al62");class u extends d.a.Component{constructor(){super(),this.formA=d.a.createRef(),this.formB=d.a.createRef(),this.columns=[{title:"ID",dataIndex:"id",key:"id",render:(e,t)=>d.a.createElement(c["a"],{type:"link",onClick:()=>{this.setState({selectedProfile:t.id}),this.refresh()}},e)},{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u5934\u50cf",dataIndex:"avatar",key:"avatar"},{title:"\u8def\u5f84",dataIndex:"path",key:"path"},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:(e,t)=>[d.a.createElement(c["a"],{onClick:()=>this.openModalA(t)},"\u7f16\u8f91"),d.a.createElement(c["a"],{type:"primary",onClick:()=>this.askDelA(t),danger:!0},"\u5220\u9664")]}],this.state={showModalA:!1,showModalB:!1,profiles:[],selectedProfile:null,groups:[]}}componentDidMount(){this.refresh()}refresh(){h["a"].get("/profiles").then(e=>e.json()).then(e=>this.setState({profiles:e})),null!=this.state.selectedProfile&&h["a"].get("/group/"+this.state.selectedProfile).then(e=>e.json()).then(e=>this.setState({groups:e}))}openModalA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,name:"",avatar:"",path:""};this.formA.current.setFieldsValue(e),this.setState({showModalA:!0})}openModalB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,name:"",profile_id:this.state.selectedProfile};this.formB.current.setFieldsValue(e),this.setState({showModalB:!0})}closeModalA(){this.setState({showModalA:!1})}closeModalB(){this.setState({showModalB:!1})}submitA(e){h["a"].post("/profile/"+e.path,this.props.match.params.token,e).then(e=>e.status).then(e=>{this.closeModalA(),this.refresh()}).catch(console.log)}submitB(e){h["a"].post("/group/"+e.id,this.props.match.params.token,e).then(e=>e.status).then(e=>{this.closeModalB(),this.refresh()}).catch(console.log)}askDelA(e){i["a"].confirm({content:"\u786e\u8ba4\u5220\u9664".concat(e.name,"\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:()=>{h["a"].delete("/profile/"+e.path,this.props.match.params.token).then(()=>this.refresh())}})}askDelB(e){i["a"].confirm({content:"\u786e\u8ba4\u5220\u9664".concat(e.name,"\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:()=>{h["a"].delete("/group/"+e.id,this.props.match.params.token).then(()=>this.refresh())}})}render(){return d.a.createElement("div",null,d.a.createElement(s["a"],null,d.a.createElement(o["a"],{columns:this.columns,dataSource:this.state.profiles}),d.a.createElement(c["a"],{type:"primary",onClick:()=>this.openModalA()},"\u6dfb\u52a0")),d.a.createElement("br",null),null!=this.state.selectedProfile&&d.a.createElement(s["a"],null,d.a.createElement(r["a"],{dataSource:this.state.groups,renderItem:e=>d.a.createElement(r["a"].Item,{actions:[d.a.createElement(c["a"],{onClick:()=>this.openModalB(e)},"\u7f16\u8f91"),d.a.createElement(c["a"],{type:"primary",onClick:()=>this.askDelB(e),danger:!0},"\u5220\u9664")]},e.name)}),d.a.createElement(c["a"],{type:"primary",onClick:()=>this.openModalB()},"\u6dfb\u52a0")),d.a.createElement(i["a"],{visible:this.state.showModalA,footer:null,onCancel:()=>this.closeModalA(),forceRender:!0},d.a.createElement(l["a"],{ref:this.formA,onFinish:e=>this.submitA(e)},d.a.createElement(l["a"].Item,{name:"id"}),d.a.createElement(l["a"].Item,{name:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]},d.a.createElement(n["a"],null)),d.a.createElement(l["a"].Item,{name:"avatar",label:"\u5934\u50cf",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5934\u50cf\u94fe\u63a5"}]},d.a.createElement(n["a"],null)),d.a.createElement(l["a"].Item,{name:"path",label:"\u8def\u5f84",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8def\u5f84"}]},d.a.createElement(n["a"],null)),d.a.createElement(l["a"].Item,null,d.a.createElement(c["a"],{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),d.a.createElement(c["a"],{onClick:()=>this.closeModalA()},"\u53d6\u6d88")))),d.a.createElement(i["a"],{visible:this.state.showModalB,footer:null,onCancel:()=>this.closeModalB(),forceRender:!0},d.a.createElement(l["a"],{ref:this.formB,onFinish:e=>this.submitB(e)},d.a.createElement(l["a"].Item,{name:"id"}),d.a.createElement(l["a"].Item,{name:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]},d.a.createElement(n["a"],null)),d.a.createElement(l["a"].Item,{name:"profile_id"}),d.a.createElement(l["a"].Item,null,d.a.createElement(c["a"],{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),d.a.createElement(c["a"],{onClick:()=>this.closeModalB()},"\u53d6\u6d88")))))}}t["default"]=u},VL1K:function(e,t,a){"use strict";a.r(t);a("5NDa");var n=a("5rEg"),l=(a("y8nQ"),a("Vl3Y")),r=(a("IzEo"),a("bx4M")),s=(a("g9YV"),a("wCAj")),o=(a("2qtc"),a("kLXV")),i=(a("+L6B"),a("2/Rp")),c=a("p0pE"),m=a.n(c),d=a("q1tI"),h=a.n(d),u=a("Al62");class p extends h.a.Component{constructor(){super(),this.form=h.a.createRef(),this.columns=[{title:"ID",dataIndex:"id",key:"id"},{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"icon",dataIndex:"icon",key:"icon"},{title:"url",dataIndex:"url",key:"url",render:e=>h.a.createElement("a",{href:e},e)},{title:"\u989c\u8272",dataIndex:"color",key:"color",render:e=>h.a.createElement("div",{style:{backgroundColor:e,minWidth:"1em",minHeight:"1em"}}," ")},{title:"\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u63cf\u8ff0",dataIndex:"description",key:"description"},{title:"\u5206\u7ec4",dataIndex:"group",key:"group",render:(e,t)=>this.state.groups[t.group.id]},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:(e,t)=>[h.a.createElement(i["a"],{onClick:()=>this.openModal(m()({},t,{group_id:t.group.id}))},"\u7f16\u8f91"),h.a.createElement(i["a"],{type:"primary",onClick:()=>this.askDel(t),danger:!0},"\u5220\u9664")]}],this.state={showModal:!1,ds:[],groups:{}}}componentDidMount(){this.refresh()}refresh(){u["a"].get("/cards").then(e=>e.json()).then(e=>this.setState({ds:e})),u["a"].get("/groups").then(e=>e.json()).then(e=>{var t={};e.forEach(e=>t[e.id]=e.profile.name+"-"+e.name),this.setState({groups:t})})}openModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,name:"",title:"",icon:"",url:"",color:"",type:"",description:"",group_id:null};this.form.current.setFieldsValue(e),this.setState({showModal:!0})}closeModal(){this.setState({showModal:!1})}submit(e){u["a"].post("/card/"+e.name,this.props.match.params.token,e).then(()=>{this.closeModal(),this.refresh()})}askDel(e){o["a"].confirm({content:"\u786e\u8ba4\u5220\u9664".concat(e.name,"\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:()=>u["a"].delete("/card/"+e.name,this.props.match.params.token).then(()=>this.refresh())})}render(){return h.a.createElement("div",null,h.a.createElement(r["a"],{style:{width:"100%"}},h.a.createElement(s["a"],{columns:this.columns,dataSource:this.state.ds,scroll:{x:!0}}),h.a.createElement(i["a"],{type:"primary",onClick:()=>this.openModal()},"\u6dfb\u52a0")),h.a.createElement(o["a"],{visible:this.state.showModal,footer:null,onCancel:()=>this.closeModal(),forceRender:!0},h.a.createElement(l["a"],{ref:this.form,onFinish:e=>this.submit(e)},h.a.createElement(l["a"].Item,{name:"id"}),h.a.createElement(l["a"].Item,{name:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,{name:"title",label:"\u6807\u9898",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,{name:"icon",label:"icon",rules:[{required:!0,message:"\u8bf7\u8f93\u5165icon"}]},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,{name:"url",label:"URL",rules:[{required:!0,message:"\u8bf7\u8f93\u5165URL"}]},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,{name:"color",label:"\u989c\u8272",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u989c\u8272"}]},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,{name:"type",label:"\u7c7b\u578b",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7c7b\u578b"}]},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,{name:"description",label:"\u63cf\u8ff0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}]},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,{name:"group_id",label:"\u5206\u7ec4"},h.a.createElement(n["a"],null)),h.a.createElement(l["a"].Item,null,h.a.createElement(i["a"],{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),h.a.createElement(i["a"],{onClick:()=>this.closeModal()},"\u53d6\u6d88")))))}}t["default"]=p},qvpx:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n);class r extends l.a.Component{render(){return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),this.props.match.params.token)}}t["default"]=r}}]);